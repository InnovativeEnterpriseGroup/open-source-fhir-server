{
	"info": {
		"_postman_id": "71bd93df-3e6d-44bf-97f4-3ef6ef1ba21a",
		"name": "roqr-nhsx",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "fhir-api-service",
			"item": [
				{
					"name": "crud",
					"item": [
						{
							"name": "Can create an Organization resource",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "65282cbb-c6e9-4b48-9692-7a433c4bdcb3",
										"exec": [
											"//Expect 201 created...",
											"pm.test(\"Can Create an Organization resource - 201 returned\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"//Created resource is returned in body - NOT operation outcome",
											"pm.test(\"Can Create an Organization resource - created resource is returned)\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.resourceType).to.exist &&",
											"    pm.expect(jsonData.resourceType).to.eql(\"Organization\");",
											"});",
											"//Service assigned internal ID to resource...",
											"pm.test(\"Can Create an Organization resource - Server assigned physical ID\", function () {",
											"    var jsonData = pm.response.json();",
											"        pm.expect(jsonData.id).to.exist;",
											"    //Set target test patient id...",
											"    pm.environment.set(\"fhir_created_organization_id\", jsonData.id);",
											"});",
											"//Meta.versionid is present...",
											"pm.test(\"Can Create an Organization resource - Resource.meta.versionId is present and === 1\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.meta.versionId).to.exist &&",
											"        pm.expect(jsonData.meta.versionId).to.eql(1);",
											"});",
											"//Location header is present and in correct format /Patient/[id]/_history/[vid]...",
											"pm.test(\"Can Create an Organization resource - Location header is present and in correct format /Organization/[id]/_history/[vid]\", function () {",
											"    ",
											"    var header = pm.response.headers.get(\"Location\");",
											"    pm.expect(header).to.eql(pm.environment.get(\"proxy_server_address\") + \"/fhir/stu3/Organization/\" + pm.environment.get(\"fhir_created_organization_id\") + \"/_history/1\");",
											"});",
											"pm.test(\"Can Create a Patient resource - ETag and Last Updated headers are present\", function () {",
											"    pm.response.to.have.header(\"ETag\") && ",
											"        pm.response.to.have.header(\"Last-Modified\");",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "accept",
										"value": "application/fhir+json",
										"type": "text"
									},
									{
										"key": "content-type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n            \"resourceType\": \"Organization\",\n            \"meta\": {\n                \"profile\": [\n                    \"https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Organization-1\"\n                ]\n            },\n            \"identifier\": [\n                {\n                    \"system\": \"https://fhir.nhs.uk/Id/ods-organization-code\",\n                    \"value\": \"03X\"\n                }\n            ],\n            \"type\": [\n                {\n                    \"coding\": [\n                        {\n                            \"system\": \"http://hl7.org/fhir/organization-type\",\n                            \"code\": \"prov\",\n                            \"display\": \"Healthcare Provider\"\n                        }\n                    ]\n                }\n            ],\n            \"name\": \"NHS EREWASH\",\n            \"address\": [\n                {\n                    \"use\": \"work\",\n                    \"type\": \"both\",\n                    \"line\": [\n                        \"Toll Bar House\",\n                        \"1 Derby Road\"\n                    ],\n                    \"city\": \"Ilkeston\",\n                    \"district\": \"Derbyshire\",\n                    \"postalCode\": \"DE7 5FH\"\n                }\n            ]\n        }"
								},
								"url": {
									"raw": "{{proxy_server_address}}/fhir/stu3/Organization",
									"host": [
										"{{proxy_server_address}}"
									],
									"path": [
										"fhir",
										"stu3",
										"Organization"
									]
								}
							},
							"response": []
						},
						{
							"name": "Can read an Organization resource",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "405981bd-74b1-4fee-b114-ff43b71e00ab",
										"exec": [
											"//Expect 200 success...",
											"pm.test(\"Can Read FHIR Organization Resource - 200 returned\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"//Resource is returned in body - NOT operation outcome",
											"pm.test(\"Can Read FHIR Organization Resource - resource is returned)\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.resourceType).to.exist &&",
											"    pm.expect(jsonData.resourceType).to.eql(\"Organization\");",
											"});",
											"//Resource id is equal to the created resource id",
											"pm.test(\"Can Read FHIR Organization Resource - resource id === server assigned resource id)\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.id).to.exist &&",
											"    pm.expect(jsonData.id).to.eql(pm.environment.get(\"fhir_created_organization_id\"));",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "894473ea-c452-4d94-b9f7-75191b290674",
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "accept",
										"type": "text",
										"value": "application/fhir+json"
									},
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"type": "text",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{proxy_server_address}}/fhir/stu3/Organization/{{fhir_created_organization_id}}",
									"host": [
										"{{proxy_server_address}}"
									],
									"path": [
										"fhir",
										"stu3",
										"Organization",
										"{{fhir_created_organization_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Can create a Practitioner resource",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "65282cbb-c6e9-4b48-9692-7a433c4bdcb3",
										"exec": [
											"//Expect 201 created...",
											"pm.test(\"Can Create a Practitioner resource - 201 returned\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"//Created resource is returned in body - NOT operation outcome",
											"pm.test(\"Can Create a Practitioner resource - created resource is returned)\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.resourceType).to.exist &&",
											"    pm.expect(jsonData.resourceType).to.eql(\"Practitioner\");",
											"});",
											"//Service assigned internal ID to resource...",
											"pm.test(\"Can Create a Practitioner resource - Server assigned physical ID\", function () {",
											"    var jsonData = pm.response.json();",
											"        pm.expect(jsonData.id).to.exist;",
											"    //Set target test patient id...",
											"    pm.environment.set(\"fhir_created_practitioner_id\", jsonData.id);",
											"});",
											"//Meta.versionid is present...",
											"pm.test(\"Can Create a Practitioner resource - Resource.meta.versionId is present and === 1\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.meta.versionId).to.exist &&",
											"        pm.expect(jsonData.meta.versionId).to.eql(1);",
											"});",
											"//Location header is present and in correct format /Patient/[id]/_history/[vid]...",
											"pm.test(\"Can Create a Practitioner resource - Location header is present and in correct format /Organization/[id]/_history/[vid]\", function () {",
											"    ",
											"    var header = pm.response.headers.get(\"Location\");",
											"    pm.expect(header).to.eql(pm.environment.get(\"proxy_server_address\") + \"/fhir/stu3/Practitioner/\" + pm.environment.get(\"fhir_created_practitioner_id\") + \"/_history/1\");",
											"});",
											"pm.test(\"Can Create a Practitioner resource - ETag and Last Updated headers are present\", function () {",
											"    pm.response.to.have.header(\"ETag\") && ",
											"        pm.response.to.have.header(\"Last-Modified\");",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "accept",
										"value": "application/fhir+json",
										"type": "text"
									},
									{
										"key": "content-type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n                \"resourceType\": \"Practitioner\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Practitioner-1\"\n                    ]\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.nhs.uk/Id/sds-user-id\",\n                        \"value\": \"G8133438\"\n                    }\n                ],\n                \"name\": [\n                    {\n                        \"family\": \"Bhatia\",\n                        \"given\": [\n                            \"AA\"\n                        ],\n                        \"prefix\": [\n                            \"Dr.\"\n                        ]\n                    }\n                ],\n                \"telecom\": [\n                    {\n                        \"system\": \"email\",\n                        \"value\": \"abhatia@nhs.skynet\",\n                        \"use\": \"work\"\n                    },\n                    {\n                        \"system\": \"phone\",\n                        \"value\": \"0115 9737320\",\n                        \"use\": \"work\"\n                    }\n                ],\n                \"address\": [\n                    {\n                        \"line\": [\n                            \"Regent Street\",\n                            \"Long Eaton\"\n                        ],\n                        \"city\": \"Nottingham\",\n                        \"district\": \"Derbyshire\",\n                        \"postalCode\": \"NG10 1QQ\"\n                    }\n                ],\n                \"gender\": \"male\"\n            }"
								},
								"url": {
									"raw": "{{proxy_server_address}}/fhir/stu3/Practitioner",
									"host": [
										"{{proxy_server_address}}"
									],
									"path": [
										"fhir",
										"stu3",
										"Practitioner"
									]
								}
							},
							"response": []
						},
						{
							"name": "Can read a Practitioner resource",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "405981bd-74b1-4fee-b114-ff43b71e00ab",
										"exec": [
											"//Expect 200 success...",
											"pm.test(\"Can Read FHIR Practitioner Resource - 200 returned\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"//Resource is returned in body - NOT operation outcome",
											"pm.test(\"Can Read FHIR Practitioner Resource - resource is returned)\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.resourceType).to.exist &&",
											"    pm.expect(jsonData.resourceType).to.eql(\"Practitioner\");",
											"});",
											"//Resource id is equal to the created resource id",
											"pm.test(\"Can Read FHIR Practitioner Resource - resource id === server assigned resource id)\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.id).to.exist &&",
											"    pm.expect(jsonData.id).to.eql(pm.environment.get(\"fhir_created_practitioner_id\"));",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "894473ea-c452-4d94-b9f7-75191b290674",
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "accept",
										"type": "text",
										"value": "application/fhir+json"
									},
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"type": "text",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{proxy_server_address}}/fhir/stu3/Practitioner/{{fhir_created_practitioner_id}}",
									"host": [
										"{{proxy_server_address}}"
									],
									"path": [
										"fhir",
										"stu3",
										"Practitioner",
										"{{fhir_created_practitioner_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Can create a Patient resource",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "405981bd-74b1-4fee-b114-ff43b71e00ab",
										"exec": [
											"//Expect 201 created...",
											"pm.test(\"Can Create a Patient resource - 201 returned\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"//Created resource is returned in body - NOT operation outcome",
											"pm.test(\"Can Create a Patient resource - created resource is returned)\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.resourceType).to.exist &&",
											"    pm.expect(jsonData.resourceType).to.eql(\"Patient\");",
											"});",
											"//Service assigned internal ID to resource...",
											"pm.test(\"Can Create a Patient resource - Server assigned physical ID\", function () {",
											"    var jsonData = pm.response.json();",
											"        pm.expect(jsonData.id).to.exist;",
											"    //Set target test patient id...",
											"    pm.environment.set(\"fhir_created_patient_id\", jsonData.id);",
											"});",
											"//Meta.versionid is present...",
											"pm.test(\"Can Create a Patient resource - Resource.meta.versionId is present and === 1\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.meta.versionId).to.exist &&",
											"        pm.expect(jsonData.meta.versionId).to.eql(1);",
											"});",
											"//Location header is present and in correct format /Patient/[id]/_history/[vid]...",
											"pm.test(\"Can Create a Patient resource - Location header is present and in correct format /Patient/[id]/_history/[vid]\", function () {",
											"    ",
											"    var header = pm.response.headers.get(\"Location\");",
											"    pm.expect(header).to.eql(pm.environment.get(\"proxy_server_address\") + \"/fhir/stu3/Patient/\" + pm.environment.get(\"fhir_created_patient_id\") + \"/_history/1\");",
											"});",
											"pm.test(\"Can Create a Patient resource - ETag and Last Updated headers are present\", function () {",
											"    pm.response.to.have.header(\"ETag\") && ",
											"        pm.response.to.have.header(\"Last-Modified\");",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "894473ea-c452-4d94-b9f7-75191b290674",
										"exec": [
											"//Get the last NHS number, increment it and persist new value in env vars...",
											"var nhsNumber = pm.environment.get(\"lastTestNHSNumber\");",
											"nhsNumber++;",
											"pm.environment.set(\"lastTestNHSNumber\", nhsNumber);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "accept",
										"type": "text",
										"value": "application/fhir+json"
									},
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"type": "text",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"resourceType\": \"Patient\",\r\n    \"identifier\": [{\r\n        \"extension\": [{\r\n            \"url\": \"https://fhir.hl7.org.uk/STU3/StructureDefinition/Extension-CareConnect-NHSNumberVerificationStatus-1\",\r\n            \"valueCodeableConcept\": {\r\n                \"coding\": [{\r\n                    \"system\": \"https://fhir.hl7.org.uk/STU3/CodeSystem/CareConnect-NHSNumberVerificationStatus-1\",\r\n                    \"code\": \"01\",\r\n                    \"display\": \"Number present and verified\"\r\n                }]\r\n            }\r\n        }],\r\n        \"system\": \"https://fhir.nhs.uk/Id/nhs-number\",\r\n        \"value\": \"{{lastTestNHSNumber}}\"\r\n    }],\r\n    \"active\": true,\r\n    \"name\": [{\r\n        \"use\": \"official\",\r\n        \"family\": \"ZZZTEST\",\r\n        \"given\": [\r\n            \"ZZZ\"\r\n        ],\r\n        \"prefix\": [\r\n            \"ZZZ\"\r\n        ]\r\n    }],\r\n    \"gender\": \"female\",\r\n    \"birthDate\": \"1986-02-27\",\r\n    \"address\": [{\r\n        \"use\": \"home\",\r\n        \"type\": \"physical\"\r\n    }],\r\n    \"maritalStatus\": {\r\n        \"coding\": [{\r\n            \"system\": \"http://hl7.org/fhir/v3/MaritalStatus\",\r\n            \"code\": \"S\",\r\n            \"display\": \"Never Married\"\r\n        }]\r\n    },\r\n    \"generalPractitioner\": [{\r\n        \"reference\": \"Practitioner/{{fhir_created_practitioner_id}}\",\r\n        \"display\": \"Mrs AA Bhatia\"\r\n    }],\r\n    \"managingOrganization\": {\r\n        \"reference\": \"Organization/{{fhir_created_organization_id}}\",\r\n        \"display\": \"HSCIC test Practice\"\r\n    }\r\n}"
								},
								"url": {
									"raw": "{{proxy_server_address}}/fhir/stu3/Patient",
									"host": [
										"{{proxy_server_address}}"
									],
									"path": [
										"fhir",
										"stu3",
										"Patient"
									]
								}
							},
							"response": []
						},
						{
							"name": "Can read a Patient resource",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "405981bd-74b1-4fee-b114-ff43b71e00ab",
										"exec": [
											"//Expect 200 success...",
											"pm.test(\"Can Read FHIR Patient Resource - 200 returned\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"//Resource is returned in body - NOT operation outcome",
											"pm.test(\"Can Read FHIR Patient Resource - resource is returned)\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.resourceType).to.exist &&",
											"    pm.expect(jsonData.resourceType).to.eql(\"Patient\");",
											"});",
											"//Resource id is equal to the created resource id",
											"pm.test(\"Can Read FHIR Patient Resource - resource id === server assigned resource id)\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.id).to.exist &&",
											"    pm.expect(jsonData.id).to.eql(pm.environment.get(\"fhir_created_patient_id\"));",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "894473ea-c452-4d94-b9f7-75191b290674",
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "accept",
										"type": "text",
										"value": "application/fhir+json"
									},
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"type": "text",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{proxy_server_address}}/fhir/stu3/Patient/{{fhir_created_patient_id}}",
									"host": [
										"{{proxy_server_address}}"
									],
									"path": [
										"fhir",
										"stu3",
										"Patient",
										"{{fhir_created_patient_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create an Encounter resource",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "405981bd-74b1-4fee-b114-ff43b71e00ab",
										"exec": [
											"//Expect 201 created...",
											"pm.test(\"Can Create an Encounter resource - 201 returned\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"//Created resource is returned in body - NOT operation outcome",
											"pm.test(\"Can Create an Encounter resource - created resource is returned)\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.resourceType).to.exist &&",
											"    pm.expect(jsonData.resourceType).to.eql(\"Encounter\");",
											"});",
											"//Service assigned internal ID to resource...",
											"pm.test(\"Can Create an Encounter resource - Server assigned physical ID\", function () {",
											"    var jsonData = pm.response.json();",
											"        pm.expect(jsonData.id).to.exist;",
											"    //Set target test patient id...",
											"    pm.environment.set(\"fhir_created_encounter_id\", jsonData.id);",
											"});",
											"//Meta.versionid is present...",
											"pm.test(\"Can Create an Organization resource - Resource.meta.versionId is present and === 1\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.meta.versionId).to.exist &&",
											"        pm.expect(jsonData.meta.versionId).to.eql(1);",
											"});",
											"//Location header is present and in correct format /Patient/[id]/_history/[vid]...",
											"pm.test(\"Can Create an Encounter resource - Location header is present and in correct format /Encounter/[id]/_history/[vid]\", function () {",
											"    ",
											"    var header = pm.response.headers.get(\"Location\");",
											"    pm.expect(header).to.eql(pm.environment.get(\"proxy_server_address\") + \"/fhir/stu3/Encounter/\" + pm.environment.get(\"fhir_created_encounter_id\") + \"/_history/1\");",
											"});",
											"pm.test(\"Can Create a Encounter resource - ETag and Last Updated headers are present\", function () {",
											"    pm.response.to.have.header(\"ETag\") && ",
											"        pm.response.to.have.header(\"Last-Modified\");",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "894473ea-c452-4d94-b9f7-75191b290674",
										"exec": [
											"var uuid = require('uuid');",
											"pm.environment.set(\"messageId\", uuid.v4());",
											"pm.environment.set(\"requestId\", uuid.v4());",
											"",
											"var moment = require('moment');",
											"pm.environment.set(\"requestedOn\", moment().utc().format());"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "accept",
										"type": "text",
										"value": "application/fhir+json"
									},
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"type": "text",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"resourceType\": \"Encounter\",\n    \"meta\": {\n        \"profile\": [\n            \"https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Encounter-1\"\n        ]\n    },\n    \"identifier\": [\n        {\n            \"system\": \"https://tools.ietf.org/html/rfc4122\",\n            \"value\": \"db00be4b-2f33-4cc3-8eff-4a57e56b185b\"\n        }\n    ],\n    \"status\": \"finished\",\n    \"class\": {\n        \"system\": \"http://hl7.org/fhir/v3/ActCode\",\n        \"code\": \"IMP\",\n        \"display\": \"inpatient encounter\"\n    },\n    \"subject\": {\n        \"reference\": \"Patient/{{fhir_created_patient_id}}\"\n    },\n    \"participant\": [\n        {\n            \"type\": [\n                {\n                    \"coding\": [\n                        {\n                            \"system\": \"http://hl7.org/fhir/v3/ParticipationType\",\n                            \"code\": \"DIS\",\n                            \"display\": \"discharger\"\n                        }\n                    ]\n                }\n            ],\n            \"individual\": {\n                \"reference\": \"Practitioner/{{fhir_created_practitioner_id}}\",\n                \"display\": \"Mrs AA Bhatia\"\n            }\n        }\n    ]\n}"
								},
								"url": {
									"raw": "{{proxy_server_address}}/fhir/stu3/Encounter",
									"host": [
										"{{proxy_server_address}}"
									],
									"path": [
										"fhir",
										"stu3",
										"Encounter"
									]
								}
							},
							"response": []
						},
						{
							"name": "Can read an Encounter resource",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "405981bd-74b1-4fee-b114-ff43b71e00ab",
										"exec": [
											"//Expect 200 success...",
											"pm.test(\"Can Read FHIR Encounter Resource - 200 returned\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"//Resource is returned in body - NOT operation outcome",
											"pm.test(\"Can Read FHIR Encounter Resource - resource is returned)\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.resourceType).to.exist &&",
											"    pm.expect(jsonData.resourceType).to.eql(\"Encounter\");",
											"});",
											"//Resource id is equal to the created resource id",
											"pm.test(\"Can Read FHIR Encounter Resource - resource id === server assigned resource id)\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.id).to.exist &&",
											"    pm.expect(jsonData.id).to.eql(pm.environment.get(\"fhir_created_encounter_id\"));",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "894473ea-c452-4d94-b9f7-75191b290674",
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "accept",
										"type": "text",
										"value": "application/fhir+json"
									},
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"type": "text",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{proxy_server_address}}/fhir/stu3/Encounter/{{fhir_created_encounter_id}}",
									"host": [
										"{{proxy_server_address}}"
									],
									"path": [
										"fhir",
										"stu3",
										"Encounter",
										"{{fhir_created_encounter_id}}"
									]
								}
							},
							"response": []
						}
					],
					"_postman_isSubFolder": true
				},
				{
					"name": "search",
					"item": [
						{
							"name": "Can create an Organization resource",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "65282cbb-c6e9-4b48-9692-7a433c4bdcb3",
										"exec": [
											"//Expect 201 created...",
											"pm.test(\"Can Create an Organization resource - 201 returned\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"//Created resource is returned in body - NOT operation outcome",
											"pm.test(\"Can Create an Organization resource - created resource is returned)\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.resourceType).to.exist &&",
											"    pm.expect(jsonData.resourceType).to.eql(\"Organization\");",
											"});",
											"//Service assigned internal ID to resource...",
											"pm.test(\"Can Create an Organization resource - Server assigned physical ID\", function () {",
											"    var jsonData = pm.response.json();",
											"        pm.expect(jsonData.id).to.exist;",
											"    //Set target test patient id...",
											"    pm.environment.set(\"fhir_created_organization_id\", jsonData.id);",
											"});",
											"//Meta.versionid is present...",
											"pm.test(\"Can Create an Organization resource - Resource.meta.versionId is present and === 1\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.meta.versionId).to.exist &&",
											"        pm.expect(jsonData.meta.versionId).to.eql(1);",
											"});",
											"//Location header is present and in correct format /Patient/[id]/_history/[vid]...",
											"pm.test(\"Can Create an Organization resource - Location header is present and in correct format /Organization/[id]/_history/[vid]\", function () {",
											"    ",
											"    var header = pm.response.headers.get(\"Location\");",
											"    pm.expect(header).to.eql(pm.environment.get(\"proxy_server_address\") + \"/fhir/stu3/Organization/\" + pm.environment.get(\"fhir_created_organization_id\") + \"/_history/1\");",
											"});",
											"pm.test(\"Can Create a Patient resource - ETag and Last Updated headers are present\", function () {",
											"    pm.response.to.have.header(\"ETag\") && ",
											"        pm.response.to.have.header(\"Last-Modified\");",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "accept",
										"value": "application/fhir+json",
										"type": "text"
									},
									{
										"key": "content-type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n            \"resourceType\": \"Organization\",\n            \"meta\": {\n                \"profile\": [\n                    \"https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Organization-1\"\n                ]\n            },\n            \"identifier\": [\n                {\n                    \"system\": \"https://fhir.nhs.uk/Id/ods-organization-code\",\n                    \"value\": \"03X\"\n                }\n            ],\n            \"type\": [\n                {\n                    \"coding\": [\n                        {\n                            \"system\": \"http://hl7.org/fhir/organization-type\",\n                            \"code\": \"prov\",\n                            \"display\": \"Healthcare Provider\"\n                        }\n                    ]\n                }\n            ],\n            \"name\": \"NHS EREWASH\",\n            \"address\": [\n                {\n                    \"use\": \"work\",\n                    \"type\": \"both\",\n                    \"line\": [\n                        \"Toll Bar House\",\n                        \"1 Derby Road\"\n                    ],\n                    \"city\": \"Ilkeston\",\n                    \"district\": \"Derbyshire\",\n                    \"postalCode\": \"DE7 5FH\"\n                }\n            ]\n        }"
								},
								"url": {
									"raw": "{{proxy_server_address}}/fhir/stu3/Organization",
									"host": [
										"{{proxy_server_address}}"
									],
									"path": [
										"fhir",
										"stu3",
										"Organization"
									]
								}
							},
							"response": []
						},
						{
							"name": "Can create a Practitioner resource",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "65282cbb-c6e9-4b48-9692-7a433c4bdcb3",
										"exec": [
											"//Expect 201 created...",
											"pm.test(\"Can Create a Practitioner resource - 201 returned\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"//Created resource is returned in body - NOT operation outcome",
											"pm.test(\"Can Create a Practitioner resource - created resource is returned)\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.resourceType).to.exist &&",
											"    pm.expect(jsonData.resourceType).to.eql(\"Practitioner\");",
											"});",
											"//Service assigned internal ID to resource...",
											"pm.test(\"Can Create a Practitioner resource - Server assigned physical ID\", function () {",
											"    var jsonData = pm.response.json();",
											"        pm.expect(jsonData.id).to.exist;",
											"    //Set target test patient id...",
											"    pm.environment.set(\"fhir_created_practitioner_id\", jsonData.id);",
											"});",
											"//Meta.versionid is present...",
											"pm.test(\"Can Create a Practitioner resource - Resource.meta.versionId is present and === 1\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.meta.versionId).to.exist &&",
											"        pm.expect(jsonData.meta.versionId).to.eql(1);",
											"});",
											"//Location header is present and in correct format /Patient/[id]/_history/[vid]...",
											"pm.test(\"Can Create a Practitioner resource - Location header is present and in correct format /Organization/[id]/_history/[vid]\", function () {",
											"    ",
											"    var header = pm.response.headers.get(\"Location\");",
											"    pm.expect(header).to.eql(pm.environment.get(\"proxy_server_address\") + \"/fhir/stu3/Practitioner/\" + pm.environment.get(\"fhir_created_practitioner_id\") + \"/_history/1\");",
											"});",
											"pm.test(\"Can Create a Practitioner resource - ETag and Last Updated headers are present\", function () {",
											"    pm.response.to.have.header(\"ETag\") && ",
											"        pm.response.to.have.header(\"Last-Modified\");",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "accept",
										"value": "application/fhir+json",
										"type": "text"
									},
									{
										"key": "content-type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n                \"resourceType\": \"Practitioner\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Practitioner-1\"\n                    ]\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.nhs.uk/Id/sds-user-id\",\n                        \"value\": \"G8133438\"\n                    }\n                ],\n                \"name\": [\n                    {\n                        \"family\": \"Bhatia\",\n                        \"given\": [\n                            \"AA\"\n                        ],\n                        \"prefix\": [\n                            \"Dr.\"\n                        ]\n                    }\n                ],\n                \"telecom\": [\n                    {\n                        \"system\": \"email\",\n                        \"value\": \"abhatia@nhs.skynet\",\n                        \"use\": \"work\"\n                    },\n                    {\n                        \"system\": \"phone\",\n                        \"value\": \"0115 9737320\",\n                        \"use\": \"work\"\n                    }\n                ],\n                \"address\": [\n                    {\n                        \"line\": [\n                            \"Regent Street\",\n                            \"Long Eaton\"\n                        ],\n                        \"city\": \"Nottingham\",\n                        \"district\": \"Derbyshire\",\n                        \"postalCode\": \"NG10 1QQ\"\n                    }\n                ],\n                \"gender\": \"male\"\n            }"
								},
								"url": {
									"raw": "{{proxy_server_address}}/fhir/stu3/Practitioner",
									"host": [
										"{{proxy_server_address}}"
									],
									"path": [
										"fhir",
										"stu3",
										"Practitioner"
									]
								}
							},
							"response": []
						},
						{
							"name": "Can create a Patient resource",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "405981bd-74b1-4fee-b114-ff43b71e00ab",
										"exec": [
											"//Expect 201 created...",
											"pm.test(\"Can Create a Patient resource - 201 returned\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"//Created resource is returned in body - NOT operation outcome",
											"pm.test(\"Can Create a Patient resource - created resource is returned)\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.resourceType).to.exist &&",
											"    pm.expect(jsonData.resourceType).to.eql(\"Patient\");",
											"});",
											"//Service assigned internal ID to resource...",
											"pm.test(\"Can Create a Patient resource - Server assigned physical ID\", function () {",
											"    var jsonData = pm.response.json();",
											"        pm.expect(jsonData.id).to.exist;",
											"    //Set target test patient id...",
											"    pm.environment.set(\"fhir_created_patient_id\", jsonData.id);",
											"});",
											"//Meta.versionid is present...",
											"pm.test(\"Can Create a Patient resource - Resource.meta.versionId is present and === 1\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.meta.versionId).to.exist &&",
											"        pm.expect(jsonData.meta.versionId).to.eql(1);",
											"});",
											"//Location header is present and in correct format /Patient/[id]/_history/[vid]...",
											"pm.test(\"Can Create a Patient resource - Location header is present and in correct format /Patient/[id]/_history/[vid]\", function () {",
											"    ",
											"    var header = pm.response.headers.get(\"Location\");",
											"    pm.expect(header).to.eql(pm.environment.get(\"proxy_server_address\") + \"/fhir/stu3/Patient/\" + pm.environment.get(\"fhir_created_patient_id\") + \"/_history/1\");",
											"});",
											"pm.test(\"Can Create a Patient resource - ETag and Last Updated headers are present\", function () {",
											"    pm.response.to.have.header(\"ETag\") && ",
											"        pm.response.to.have.header(\"Last-Modified\");",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "894473ea-c452-4d94-b9f7-75191b290674",
										"exec": [
											"//Get the last NHS number, increment it and persist new value in env vars...",
											"var nhsNumber = pm.environment.get(\"lastTestNHSNumber\");",
											"nhsNumber++;",
											"pm.environment.set(\"lastTestNHSNumber\", nhsNumber);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "accept",
										"type": "text",
										"value": "application/fhir+json"
									},
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"type": "text",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"resourceType\": \"Patient\",\r\n    \"identifier\": [{\r\n        \"extension\": [{\r\n            \"url\": \"https://fhir.hl7.org.uk/STU3/StructureDefinition/Extension-CareConnect-NHSNumberVerificationStatus-1\",\r\n            \"valueCodeableConcept\": {\r\n                \"coding\": [{\r\n                    \"system\": \"https://fhir.hl7.org.uk/STU3/CodeSystem/CareConnect-NHSNumberVerificationStatus-1\",\r\n                    \"code\": \"01\",\r\n                    \"display\": \"Number present and verified\"\r\n                }]\r\n            }\r\n        }],\r\n        \"system\": \"https://fhir.nhs.uk/Id/nhs-number\",\r\n        \"value\": \"{{lastTestNHSNumber}}\"\r\n    }],\r\n    \"active\": true,\r\n    \"name\": [{\r\n        \"use\": \"official\",\r\n        \"family\": \"ZZZTEST\",\r\n        \"given\": [\r\n            \"ZZZ\"\r\n        ],\r\n        \"prefix\": [\r\n            \"ZZZ\"\r\n        ]\r\n    }],\r\n    \"gender\": \"female\",\r\n    \"birthDate\": \"1986-02-27\",\r\n    \"address\": [{\r\n        \"use\": \"home\",\r\n        \"type\": \"physical\"\r\n    }],\r\n    \"maritalStatus\": {\r\n        \"coding\": [{\r\n            \"system\": \"http://hl7.org/fhir/v3/MaritalStatus\",\r\n            \"code\": \"S\",\r\n            \"display\": \"Never Married\"\r\n        }]\r\n    },\r\n    \"generalPractitioner\": [{\r\n        \"reference\": \"Practitioner/{{fhir_created_practitioner_id}}\",\r\n        \"display\": \"Mrs AA Bhatia\"\r\n    }],\r\n    \"managingOrganization\": {\r\n        \"reference\": \"Organization/{{fhir_created_organization_id}}\",\r\n        \"display\": \"HSCIC test Practice\"\r\n    }\r\n}"
								},
								"url": {
									"raw": "{{proxy_server_address}}/fhir/stu3/Patient",
									"host": [
										"{{proxy_server_address}}"
									],
									"path": [
										"fhir",
										"stu3",
										"Patient"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create an Encounter resource",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "405981bd-74b1-4fee-b114-ff43b71e00ab",
										"exec": [
											"//Expect 201 created...",
											"pm.test(\"Can Create an Encounter resource - 201 returned\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"//Created resource is returned in body - NOT operation outcome",
											"pm.test(\"Can Create an Encounter resource - created resource is returned)\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.resourceType).to.exist &&",
											"    pm.expect(jsonData.resourceType).to.eql(\"Encounter\");",
											"});",
											"//Service assigned internal ID to resource...",
											"pm.test(\"Can Create an Encounter resource - Server assigned physical ID\", function () {",
											"    var jsonData = pm.response.json();",
											"        pm.expect(jsonData.id).to.exist;",
											"    //Set target test patient id...",
											"    pm.environment.set(\"fhir_created_encounter_id\", jsonData.id);",
											"});",
											"//Meta.versionid is present...",
											"pm.test(\"Can Create an Organization resource - Resource.meta.versionId is present and === 1\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.meta.versionId).to.exist &&",
											"        pm.expect(jsonData.meta.versionId).to.eql(1);",
											"});",
											"//Location header is present and in correct format /Patient/[id]/_history/[vid]...",
											"pm.test(\"Can Create an Encounter resource - Location header is present and in correct format /Encounter/[id]/_history/[vid]\", function () {",
											"    ",
											"    var header = pm.response.headers.get(\"Location\");",
											"    pm.expect(header).to.eql(pm.environment.get(\"proxy_server_address\") + \"/fhir/stu3/Encounter/\" + pm.environment.get(\"fhir_created_encounter_id\") + \"/_history/1\");",
											"});",
											"pm.test(\"Can Create a Encounter resource - ETag and Last Updated headers are present\", function () {",
											"    pm.response.to.have.header(\"ETag\") && ",
											"        pm.response.to.have.header(\"Last-Modified\");",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "894473ea-c452-4d94-b9f7-75191b290674",
										"exec": [
											"var uuid = require('uuid');",
											"pm.environment.set(\"messageId\", uuid.v4());",
											"pm.environment.set(\"requestId\", uuid.v4());",
											"",
											"var moment = require('moment');",
											"pm.environment.set(\"requestedOn\", moment().utc().format());"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "accept",
										"type": "text",
										"value": "application/fhir+json"
									},
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"type": "text",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"resourceType\": \"Encounter\",\n    \"meta\": {\n        \"profile\": [\n            \"https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Encounter-1\"\n        ]\n    },\n    \"identifier\": [\n        {\n            \"system\": \"https://tools.ietf.org/html/rfc4122\",\n            \"value\": \"db00be4b-2f33-4cc3-8eff-4a57e56b185b\"\n        }\n    ],\n    \"status\": \"finished\",\n    \"class\": {\n        \"system\": \"http://hl7.org/fhir/v3/ActCode\",\n        \"code\": \"IMP\",\n        \"display\": \"inpatient encounter\"\n    },\n    \"subject\": {\n        \"reference\": \"Patient/{{fhir_created_patient_id}}\",\n        \"identifier\": {\"system\": \"https://fhir.nhs.uk/Id/nhs-number\",\"value\":\"{{lastTestNHSNumber}}\"}\n    },\n    \"participant\": [\n        {\n            \"type\": [\n                {\n                    \"coding\": [\n                        {\n                            \"system\": \"http://hl7.org/fhir/v3/ParticipationType\",\n                            \"code\": \"DIS\",\n                            \"display\": \"discharger\"\n                        }\n                    ]\n                }\n            ],\n            \"individual\": {\n                \"reference\": \"Practitioner/{{fhir_created_practitioner_id}}\",\n                \"display\": \"Mrs AA Bhatia\"\n            }\n        }\n    ]\n}"
								},
								"url": {
									"raw": "{{proxy_server_address}}/fhir/stu3/Encounter",
									"host": [
										"{{proxy_server_address}}"
									],
									"path": [
										"fhir",
										"stu3",
										"Encounter"
									]
								}
							},
							"response": []
						},
						{
							"name": "Can search Patient by NHS Number",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "405981bd-74b1-4fee-b114-ff43b71e00ab",
										"exec": [
											"//Expect 200 success...",
											"pm.test(\"Can Search FHIR Patient Resources by NHS Number - 200 returned\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"//Bundle is returned in body - NOT operation outcome",
											"pm.test(\"Can Search FHIR Patient Resources by NHS Number - 1 resource is returned\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.resourceType).to.exist &&",
											"    pm.expect(jsonData.resourceType).to.eql(\"Bundle\");",
											"});",
											"//1 resource is returned and that resource is a patient...",
											"pm.test(\"Can Search FHIR Patient Resources by NHS Number - 1 resource is returned\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.entry.length).to.eql(1);",
											"});",
											"//Nhs number === nhs number searched for",
											"pm.test(\"Can Search FHIR Patient Resources by NHS Number - nhs number === nhs number searched for\", function () {",
											"    var jsonData = pm.response.json();",
											"    var resource = jsonData.entry[0].resource;",
											"    pm.expect(resource.identifier[0].value).to.eql(pm.environment.get(\"lastTestNHSNumber\"));",
											"    ",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "894473ea-c452-4d94-b9f7-75191b290674",
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "accept",
										"type": "text",
										"value": "application/fhir+json"
									},
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"type": "text",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{proxy_server_address}}/fhir/stu3/Patient?identifier=https://fhir.nhs.uk/Id/nhs-number|{{lastTestNHSNumber}}",
									"host": [
										"{{proxy_server_address}}"
									],
									"path": [
										"fhir",
										"stu3",
										"Patient"
									],
									"query": [
										{
											"key": "identifier",
											"value": "https://fhir.nhs.uk/Id/nhs-number|{{lastTestNHSNumber}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Can search Patient by _id",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "405981bd-74b1-4fee-b114-ff43b71e00ab",
										"exec": [
											"//Expect 200 success...",
											"pm.test(\"Can Search FHIR Patient Resources by NHS Number - 200 returned\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"//Bundle is returned in body - NOT operation outcome",
											"pm.test(\"Can Search FHIR Patient Resources by NHS Number - 1 resource is returned\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.resourceType).to.exist &&",
											"    pm.expect(jsonData.resourceType).to.eql(\"Bundle\");",
											"});",
											"//1 resource is returned and that resource is a patient...",
											"pm.test(\"Can Search FHIR Patient Resources by NHS Number - 1 resource is returned\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.entry.length).to.eql(1);",
											"});",
											"//Nhs number === nhs number searched for",
											"pm.test(\"Can Search FHIR Patient Resources by NHS Number - nhs number === nhs number searched for\", function () {",
											"    var jsonData = pm.response.json();",
											"    var resource = jsonData.entry[0].resource;",
											"    pm.expect(resource.identifier[0].value).to.eql(pm.environment.get(\"lastTestNHSNumber\"));",
											"    ",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "894473ea-c452-4d94-b9f7-75191b290674",
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "accept",
										"type": "text",
										"value": "application/fhir+json"
									},
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"type": "text",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{proxy_server_address}}/fhir/stu3/Patient?_id={{fhir_created_patient_id}}",
									"host": [
										"{{proxy_server_address}}"
									],
									"path": [
										"fhir",
										"stu3",
										"Patient"
									],
									"query": [
										{
											"key": "_id",
											"value": "{{fhir_created_patient_id}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Can search Patient by NHS Number and revinclude Encounter",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "405981bd-74b1-4fee-b114-ff43b71e00ab",
										"exec": [
											"//Expect 200 success...",
											"pm.test(\"Can Search FHIR Patient Resources by NHS Number - 200 returned\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"//Bundle is returned in body - NOT operation outcome",
											"pm.test(\"Can Search FHIR Patient Resources by NHS Number and revinclude Encounter - 2 resources are returned\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.resourceType).to.exist &&",
											"    pm.expect(jsonData.resourceType).to.eql(\"Bundle\");",
											"});",
											"//1 resource is returned and that resource is a patient...",
											"pm.test(\"Can Search FHIR Patient Resources by NHS Number and revinclude Encounter - 2 resources are returned\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.entry.length).to.eql(2);",
											"});",
											"//Nhs number === nhs number searched for",
											"pm.test(\"Can Search FHIR Patient Resources by NHS Number and revinclude Encounter - nhs number === nhs number searched for\", function () {",
											"    var jsonData = pm.response.json();",
											"    var resource = jsonData.entry[0].resource;",
											"    pm.expect(resource.identifier[0].value).to.eql(pm.environment.get(\"lastTestNHSNumber\"));",
											"    ",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "894473ea-c452-4d94-b9f7-75191b290674",
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "accept",
										"type": "text",
										"value": "application/fhir+json"
									},
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"type": "text",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{proxy_server_address}}/fhir/stu3/Patient?identifier=https://fhir.nhs.uk/Id/nhs-number|{{lastTestNHSNumber}}&_revinclude=Encounter:patient",
									"host": [
										"{{proxy_server_address}}"
									],
									"path": [
										"fhir",
										"stu3",
										"Patient"
									],
									"query": [
										{
											"key": "identifier",
											"value": "https://fhir.nhs.uk/Id/nhs-number|{{lastTestNHSNumber}}"
										},
										{
											"key": "_revinclude",
											"value": "Encounter:patient"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Can search for an Encounter and include Patient",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "405981bd-74b1-4fee-b114-ff43b71e00ab",
										"exec": [
											"//Expect 200 success...",
											"pm.test(\"Can Search FHIR Encounter Resource by _id and include Patient - 200 returned\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"//Bundle is returned in body - NOT operation outcome",
											"pm.test(\"Can Search FHIR Encounter Resource by _id and include Patient - 200 returned\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.resourceType).to.exist &&",
											"    pm.expect(jsonData.resourceType).to.eql(\"Bundle\");",
											"});",
											"//1 resource is returned and that resource is a patient...",
											"pm.test(\"Can Search FHIR Encounter Resource by _id and include Patient - 2 resources returned\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.entry.length).to.eql(2);",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "894473ea-c452-4d94-b9f7-75191b290674",
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "accept",
										"type": "text",
										"value": "application/fhir+json"
									},
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"type": "text",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{proxy_server_address}}/fhir/stu3/Encounter?_id={{fhir_created_encounter_id}}&_include=Encounter:patient",
									"host": [
										"{{proxy_server_address}}"
									],
									"path": [
										"fhir",
										"stu3",
										"Encounter"
									],
									"query": [
										{
											"key": "_id",
											"value": "{{fhir_created_encounter_id}}"
										},
										{
											"key": "_include",
											"value": "Encounter:patient"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Can search for an Encounter by patient NHS Number",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "405981bd-74b1-4fee-b114-ff43b71e00ab",
										"exec": [
											"//Expect 200 success...",
											"pm.test(\"Can Search FHIR Patient Resources by NHS Number - 200 returned\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"//Bundle is returned in body - NOT operation outcome",
											"pm.test(\"Can Search FHIR Patient Resources by NHS Number - 1 resource is returned\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.resourceType).to.exist &&",
											"    pm.expect(jsonData.resourceType).to.eql(\"Bundle\");",
											"});",
											"//1 resource is returned and that resource is a patient...",
											"pm.test(\"Can Search FHIR Patient Resources by NHS Number - 1 resource is returned\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.entry.length).to.eql(1);",
											"});",
											"//Nhs number === nhs number searched for",
											"pm.test(\"Can Search FHIR Patient Resources by NHS Number - nhs number === nhs number searched for\", function () {",
											"    var jsonData = pm.response.json();",
											"    var resource = jsonData.entry[0].resource;",
											"    pm.expect(resource.subject.identifier.value).to.eql(pm.environment.get(\"lastTestNHSNumber\"));",
											"    ",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "894473ea-c452-4d94-b9f7-75191b290674",
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "accept",
										"type": "text",
										"value": "application/fhir+json"
									},
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"type": "text",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{proxy_server_address}}/fhir/stu3/Encounter?patient:identifier=https://fhir.nhs.uk/Id/nhs-number|{{lastTestNHSNumber}}",
									"host": [
										"{{proxy_server_address}}"
									],
									"path": [
										"fhir",
										"stu3",
										"Encounter"
									],
									"query": [
										{
											"key": "patient:identifier",
											"value": "https://fhir.nhs.uk/Id/nhs-number|{{lastTestNHSNumber}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Can search Encounter by _id",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "405981bd-74b1-4fee-b114-ff43b71e00ab",
										"exec": [
											"//Expect 200 success...",
											"pm.test(\"Can Search FHIR Encounter Resource by _id - 200 returned\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"//Bundle is returned in body - NOT operation outcome",
											"pm.test(\"Can Search FHIR Encounter Resource by _id - 1 resource is returned\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.resourceType).to.exist &&",
											"    pm.expect(jsonData.resourceType).to.eql(\"Bundle\");",
											"});",
											"//1 resource is returned and that resource is a patient...",
											"pm.test(\"Can Search FHIR Encounter Resource by _id - 1 resource is returned\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.entry.length).to.eql(1);",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "894473ea-c452-4d94-b9f7-75191b290674",
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "accept",
										"type": "text",
										"value": "application/fhir+json"
									},
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"type": "text",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{proxy_server_address}}/fhir/stu3/Encounter?_id={{fhir_created_encounter_id}}",
									"host": [
										"{{proxy_server_address}}"
									],
									"path": [
										"fhir",
										"stu3",
										"Encounter"
									],
									"query": [
										{
											"key": "_id",
											"value": "{{fhir_created_encounter_id}}"
										}
									]
								}
							},
							"response": []
						}
					],
					"_postman_isSubFolder": true
				}
			]
		}
	]
}